{% extends 'layout.html' %}

{% block breadcrumbs %}
	{% from 'common/_macros.html' import breadcrumbs %}
	{{ breadcrumbs(APP_BREADCRUMBS + [
      ('Species progress', None),
    ]) }}
{% endblock %}


{% block content %}
	<div tabindex="1">
		<h1>EU population status and trends</h1>

		<p>
			Choose a period and an assessment type.
		</p>

		{% include 'progress/filters.html' %}

		{% if current_selection %}
      {% set page_type='progress' %}
			{% include 'common/legend.html' with context %}
			<table class="complex_datatable">
				<caption>
					<b>Current selection</b>:
					{{ current_selection|join(', ') }}.
				</caption>

				<tbody class="thead">
				<tr>
					<th>Species</th>
					<th>Assessment</th>
				</tr>
				</tbody>

				<tbody>
				{% for code, name in species %}
          {% for conclusion, title in conclusions.get(code, '') %}
            <tr class="stripe_row">
              <td class="th">
                {% set summary_url = url_for('views.summary', period=dataset.id, subject=code) %}
                <a href="{{ summary_url }}">{{ name }}</a>
              </td>
              {% if label_type == 'status' %}
              <td class="center border_left status-{{ STATUS_CLASSES.get(conclusion) }} text-center" title="{{ title }}">
              {% else %}
              <td class="center border_left trend-{{ TREND_CLASSES.get(conclusion) }} text-center" title="{{ title }}">
              {% endif %}
                <span class="conclusion">
                  {{ conclusion or ''}}
                </span>
              </td>
            </tr>
          {% endfor %}
				{% endfor %}
				</tbody>

			</table>
		{% else %}
			<p><b>Please select a period and an assessment type.</b></p>
		{% endif %}
	</div>
{% endblock %}
